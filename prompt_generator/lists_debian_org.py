import requests
from bs4 import BeautifulSoup

def generate_prompt(url: str):

    prompt = '''
I will give you some information about the content of posts discussing software vulnerabilities. The information includes these parts: title and post content. followed by {Title} and {Post} respectively. You need to extract the valuable parts from the information. The focus is on the information section describing the vulnerability. If the content section contains insufficient information to extract valuable details about the vulnerability, the output should be "no results".\n\n'''[1:]

    res = requests.get(url)
    soup = BeautifulSoup(res.text, 'html.parser')

    info = soup.h1
    if info != None:
        # print(info.text)
        prompt += '{Title}:\n' + info.text + '\n\n'

    info = soup.pre
    if info != None:
        # print(info.text)
        prompt += '{Post}:\n' + info.text

    prompt += '''
Atenetion: If the content section contains insufficient information to extract valuable details about the vulnerability, the output should be "no results". Do not output redundant prompt information, only output "no results".'''
    return prompt

if __name__ == '__main__':
    url = 'https://lists.debian.org/debian-lts-announce/2023/10/msg00008.html'
    prompt = generate_prompt(url)
    if prompt != None:
        with open('./prompt_template/prompt_test/lists.debian.org', 'w') as f:
            print(prompt, file = f)