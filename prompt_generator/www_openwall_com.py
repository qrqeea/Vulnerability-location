import requests
from bs4 import BeautifulSoup

def generate_prompt(url: str):

    prompt = '''
I will give you some information about the content of posts discussing software vulnerabilities. You need to extract the valuable parts from the information. The focus is on the information section describing the vulnerability. If the content section contains insufficient information to extract valuable details about the vulnerability, the output should be "no results".\n\n'''[1:]

    res = requests.get(url)
    soup = BeautifulSoup(res.text, 'html.parser')

    info = soup.pre
    if info != None:
        # print(info.text)
        prompt += info.text

    return prompt

if __name__ == '__main__':
    url = 'https://www.openwall.com/lists/oss-security/2021/12/23/2'
    prompt = generate_prompt(url)
    if prompt != None:
        with open('./prompt_template/prompt_test/www.openwall.com', 'w') as f:
            print(prompt, file = f)