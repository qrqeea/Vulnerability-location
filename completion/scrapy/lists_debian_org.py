import requests
from bs4 import BeautifulSoup


def scrapy(url: str):
    # 有个奇怪的问题，有时候开了代理反而访问不了，可能需要手动关掉代理
    
    res = ''
    soup = BeautifulSoup(requests.get(url).text, 'html.parser')

    info = soup.h1
    if info != None:
        # print(info.text)
        res += 'Title:\n' + info.text + '\n\n'

    info = soup.pre
    if info != None:
        res += 'Post:\n' + info.text
        if any(item in url for item in ['1017', '1789', '1503']):
            r = res.find('Upgrade Instructions')
            if r == -1:
                r = res.find('Upgrade instructions')
            res = res[:r]
    
    return res


if __name__ == '__main__':
    url = 'https://www.debian.org/security/2021/dsa-4918'
    res = scrapy(url)
    print(res)