import requests
from bs4 import BeautifulSoup
from util import format_text


def scrapy(url: str):

    res = ''
    
    soup = BeautifulSoup(requests.get(url).text, 'html.parser')
    # print(res.text)
    title = "Title:\n"
    try:
        info = soup.section.h1
        if info != None:
            title += info.text + '\n'
        info = soup.section.p.find_next(name = 'p')
        if info != None:
            title += info.text
        # print(title)
        res += title + '\n' + "Content:\n"

        info = soup.section.find_all(name = 'div', attrs = {
            'class' : 'row',
        })

        for item in info:
            res += format_text(item.text)
            # print('--------------------------------------------------')
    except Exception:
        return None

    return res


if __name__ == '__main__':
    url = 'http://www.ubuntu.com/usn/USN-3096-1'
    res = scrapy(url)
    print(res)