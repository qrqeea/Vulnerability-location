import requests
from bs4 import BeautifulSoup

def generate_prompt(url: str):
    if 'archives' in url:
        return generate_prompt_archives(url)
    else:
        return None


def generate_prompt_archives(url: str):
    
    prompt = '''
I will give you some information about a software vulnerability. The information includes these parts: title and content, followed by {Title}, {Content} respectively. Note that some parts may not exist. You need to extract the valuable parts from the information. The focus is on the information section describing the vulnerability.\n\n'''[1:]

    res = requests.get(url)
    soup = BeautifulSoup(res.text, 'html.parser')

    info = soup.h1
    if info != None:
        # print(info.text)
        prompt += '{Title}:\n' + info.text + '\n\n'

    info = soup.pre
    if info != None:
        # print(info.text)
        prompt += '{Content}:\n' + info.text

    return prompt

if __name__ == '__main__':
    url = 'https://listman.redhat.com/archives/fedora-announce-list/2006-April/msg00154.html'
    prompt = generate_prompt(url)
    if prompt != None:
        with open('./prompt_template/prompt_test/www.redhat.com', 'w') as f:
            print(prompt, file = f)