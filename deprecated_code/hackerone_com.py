from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC


prompt = '''I will give you the content of a discussion thread about a NVD vulnerability. The content of the post is divided into four parts. The first part is the title, followed by {title}. The second part is the content of the vulnerability, followed by {content}. The second part is the content of the vulnerability, followed by {content}. The third part is about some parameters of the vulnerability, such as Attack vector, Network Attack complexity, etc. These information follows {parameters}. The second part is some discussion about the vulnerability. The discussion may be posted by different people. The content of discussion will follow {post1}, {post2}, {post3}, etc. Note that this part may be empty.

I need you to summarize these contents, extract useful information and describe it in a complete paragraph.

'''

url = 'https://hackerone.com/reports/1361804'

driver = webdriver.Chrome()
driver.get(url)

element = WebDriverWait(driver, 10).until(
    EC.presence_of_element_located((By.CLASS_NAME, 'sc-aXZVg RFwOC'))
)
# content = driver.page_source
# print(content)
# with open('./test/test.html', 'w') as f:
#     print(content, file = f)

print(element.text)

# title = driver.find_element(By.ID, 'title').text
# prompt += '{title}: ' + title + '\n\n'

# content = driver.find_element(By.ID, 'markdown').text
# prompt += '{content}:\n' + content + '\n\n'

# parameters = driver.find_element(By.ID, 'meta-container').text
# prompt += '{parameters}:\n' + parameters + '\n\n'

# posts = driver.find_elements(By.ID, 'message-body')
# print(len(posts))
# index = 1
# for post in posts:
#     if post.text != "":
#         prompt += '{post' + f'{index}' + '}:\n' + post.text + '\n'
#         index += 1

# with open('./prompt/hackerone.com', 'w') as f:
#     print(prompt, file = f)

driver.quit()