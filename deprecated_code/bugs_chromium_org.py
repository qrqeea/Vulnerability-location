from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

url = 'https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=313'

driver = webdriver.Chrome()
driver.get(url)

element = WebDriverWait(driver, 10).until(
    EC.presence_of_element_located((By.CLASS_NAME, 'issue-header-container'))
)

content = driver.page_source
print(content)

# title = driver.find_element(By.CLASS_NAME, 'chatty_title').text
# content = driver.find_elements(By.CLASS_NAME, 'chatty_body')
# print(type(content))        # list，每个元素是帖子内容
# print(len(content))


# prompt = '''I will give you the content of a discussion thread about NVD vulnerabilities. The content of the post is divided into two parts. The first part is the title of the post, and the second part is the content of the discussion. The content may be posted by different people. The title will follow {title}. The content will follow {post1}, {post2}, {post3}etc.
# I need you to summarize these contents, extract useful information and describe it in a complete paragraph.

# '''

# prompt += '{title}: ' + f'{title}\n\n'
# for index, post in enumerate(content):
#     # print(index)
#     prompt += '{post' + f'{index + 1}' + '}: ' + post.text + '\n\n'

# with open('./prompt/bugs.chromium.org', 'w') as f:
#     print(prompt, file = f)

driver.quit()